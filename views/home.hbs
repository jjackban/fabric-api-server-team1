<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서책 판매 사이트</title>
        <link rel="stylesheet" href="index.css" />
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const cartItems = document.getElementById('cart-items');
            const pointModal = document.getElementById('pointModal');
            const cashModal = document.getElementById('cashModal');
            const sendPointLink = document.getElementById('sendPoint');
            const sendCashLink = document.getElementById('sendCash');
            const pointForm = document.getElementById('pointForm');
            const cashForm = document.getElementById('cashForm');
            const cashcharge = document.getElementById('cashcharge');

            document.querySelectorAll('.book-item').forEach(function (bookItem) {
                bookItem.querySelector('.actions button[type="button"]').addEventListener('click', function () {
                    const title = bookItem.querySelector('figcaption').textContent;
                    const price = bookItem.querySelector('.price').textContent;
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `${title} - ${price} <button class="remove-item">-</button>`;
                    cartItems.appendChild(listItem);

                    listItem.querySelector('.remove-item').addEventListener('click', function () {
                        cartItems.removeChild(listItem);
                    });
                });
            });
            
            document.getElementById('send-points').addEventListener('click', function () {
                document.getElementById('points-popup').style.display = 'flex';
            });
    
            document.getElementById('send-cash').addEventListener('click', function () {
                document.getElementById('cash-popup').style.display = 'flex';
            });

            document.getElementById('charge-cash').addEventListener('click', function () {
                document.getElementById('cashcharge-popup').style.display = 'flex';
            });
    
            document.getElementById('close-points-popup').addEventListener('click', function () {
                document.getElementById('points-popup').style.display = 'none';
            });
    
            document.getElementById('close-cash-popup').addEventListener('click', function () {
                document.getElementById('cash-popup').style.display = 'none';
            });

            document.getElementById('close-cashcharge-popup').addEventListener('click', function () {
                document.getElementById('cashcharge-popup').style.display = 'none';
            });
            });
    

    </script>
</head>

<body>

    <div class="navbar">
        <div class="logo">
            <a href="#">뷰리 서점</a>
        </div>
        <div class="search-container">
            <input type="text" placeholder="검색어를 입력하세요.">
            <i class="fas fa-search search-icon"></i>
        </div>
        <div class="auth-buttons">
            <a href="/log">로그인</a>
            <a href="/join">회원가입</a>
        </div>
    </div>

    <div class="main-content">
        <div class="book-item">
            <img src="./book1.png" alt="불변의 법칙">
            <div class="book-info">
                <figcaption>불변의 법칙</figcaption>
                <div class="price">8000원</div>
                <div class="points">적립 포인트: 800P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book1">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                    
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book2.png" alt="리틀 라이프 1">
            <div class="book-info">
                <figcaption>리틀 라이프 1</figcaption>
                <div class="price">9000원</div>
                <div class="points">적립 포인트: 900P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book2">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book3.png" alt="허송세월">
            <div class="book-info">
                <figcaption>허송세월</figcaption>
                <div class="price">7500원</div>
                <div class="points">적립 포인트: 750P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book3">
                        <button type="submit">구입</button>
                    <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book4.png" alt="모순">
            <div class="book-info">
                <figcaption>모순</figcaption>
                <div class="price">10000원</div>
                <div class="points">적립 포인트: 1000P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book4">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book5.png" alt="하루 한 장 나의 어휘력을 위한 필사 노트">
            <div class="book-info">
                <figcaption>하루 한 장 나의 어휘력을 위한 필사 노트</figcaption>
                <div class="price">5000원</div>
                <div class="points">적립 포인트: 500P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book5">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book6.png" alt="돈의 심리학">
            <div class="book-info">
                <figcaption>돈의 심리학</figcaption>
                <div class="price">6000원</div>
                <div class="points">적립 포인트: 600P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book6">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book7.png" alt="아이가 없는 집">
            <div class="book-info">
                <figcaption>아이가 없는 집</figcaption>
                <div class="price">8500원</div>
                <div class="points">적립 포인트: 850P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book7">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book8.png" alt="마흔에 읽는 쇼펜하우어">
            <div class="book-info">
                <figcaption>마흔에 읽는 쇼펜하우어</figcaption>
                <div class="price">9500원</div>
                <div class="points">적립 포인트: 950P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book8">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book9.png" alt="나를 사랑하는 것이 먼저다">
            <div class="book-info">
                <figcaption>나를 사랑하는 것이 먼저다.</figcaption>
                <div class="price">7000원</div>
                <div class="points">적립 포인트: 700P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book9">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="book-item">
            <img src="./book10.png" alt="우리는 날마다 조금씩 행복해진다">
            <div class="book-info">
                <figcaption>우리는 날마다 조금씩 행복해진다.</figcaption>
                <div class="price">12000원</div>
                <div class="points">적립 포인트: 1200P</div>
                <div class="actions">
                    <form action="purchaseBook" method="get">
                        <input type="hidden" name="userID" value="{{userid}}">
                        <input type="hidden" name="bookID" value="book10">
                        <button type="submit">구입</button>
                        <button type="button" id="cart">담기</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="sidebar-fixed sidebar-1">
        {{#if userid}}
        <h2>{{userid}} 님 환영합니다.</h2>
        <form action="/queryAll" method="get">
        <input type="hidden" name="name" value="{{userid}}">
        <button>조회하기</button>
        </form>
        <ul>
            <li>잔여 캐시 : {{cash}}</li>
            <li>잔여 포인트 : {{point}}</li>
            <h2><a href="#" id="send-points">포인트 보내기</a></h2>
            <h2><a href="#" id="send-cash">캐시 보내기</a></h2>
        </ul>
        {{else}}
        <h3>로그인 해주세요</h3>
        {{/if}}
    </div>
{{!--  포인트 보내기  --}}
    <div class="popup" id="points-popup">
        <div class="popup-content">
            <form action="/invokePoint" method="get">
            <h2>포인트 보내기</h2>
            <input type="hidden" name="sender" value="{{userid}}">
            <input type="text" id = "points" name="receiver" placeholder="받을 사용자명을 입력하세요."><br>
            <input type="text" id = "userid" name="amount" placeholder="포인트(숫자)를 입력하세요."><br>
            <button type="submit" id="send-points">전송</button>
            <button type="button" id="close-points-popup">닫기</button>
            </form>
            
        </div>
    </div>

    <div class="popup" id="cash-popup">
        <div class="popup-content">
            <form action="/invoke" method="get">
            <h2>캐시 보내기</h2>
            <input type="hidden" name="sender" value="{{userid}}">
            <input type="text" id = "points" name="receiver" placeholder="사용자명을 입력하세요."><br>
            <input type="text" id = "userid" name="amount" placeholder="캐시(숫자)를 입력하세요."><br>
            <button type="submit" id="send-points">전송</button>
            <button type="button" id="close-cash-popup">닫기</button>
            </form>
            
        </div>
    </div>
    <div class="popup" id="cashcharge-popup">
        <div class="popup-content">
            <h2>캐시 충전하기</h2>
            <form action="/chargeMoney" method="get">
                <input type="hidden" id="userid" name="userID" value={{userid}}><br>
                <input type="text" id="points" name="amount" placeholder="충전할 금액"><br>
                <button id="send-points" type="submit">충전</button>
                <button id="close-cashcharge-popup" type="button">닫기</button>
            </form>
        </div>
    </div>

    <div class="sidebar-fixed sidebar-2">
        <div class="cart-items">
            <h3>캐시 충전</a></h3>
            <button type="buy" id="charge-cash">충전</button>
        </div>
    </div>
    <div class="sidebar-fixed sidebar-3">
        <div class="cart-items">
            <h3>장바구니</h3>
            <ul id="cart-items">
            </ul>
            <button type="buy">구입</button>
        </div>
    </div>
    <footer>
        <div>
            <h3>고객센터</h3>
            <p>전화: 1544-1900</p>
            <p>운영시간: 평일 09:00 - 18:00</p>
        </div>
        <div>
            <h3>회사 정보</h3>
            <ul>
                <li><a href="#">회사소개</a></li>
                <li><a href="#">이용약관</a></li>
                <li><a href="#">개인정보처리방침</a></li>
            </ul>
        </div>
        <div>
            <h3>SNS</h3>
            <ul>
                <li><a href="#">Facebook</a></li>
                <li><a href="#">Instagram</a></li>
                <li><a href="#">Twitter</a></li>
            </ul>
        </div>
        <p>&copy; 2024 뷰리서점. All rights reserved.</p>
    </footer>
</body>

</html>
